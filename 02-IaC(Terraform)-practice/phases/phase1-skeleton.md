# Phase 1: Terraform å°ˆæ¡ˆéª¨æ¶

## ğŸ“‹ æœ¬éšæ®µç›®æ¨™

å»ºç«‹ Terraform å°ˆæ¡ˆçš„åŸºæœ¬ç›®éŒ„çµæ§‹èˆ‡ç©ºæª”æ¡ˆéª¨æ¶ã€‚

> âš ï¸ **é‡è¦**: æœ¬éšæ®µ **åªå»ºç«‹éª¨æ¶**ï¼Œä¸å®šç¾©ä»»ä½• GCP resource

---

## 1. å°ˆæ¡ˆç›®éŒ„çµæ§‹

```
02-IaC(Terraform)-practice/
â”œâ”€â”€ main.tf              # ä¸»è¦è³‡æºå®šç¾©å…¥å£
â”œâ”€â”€ variables.tf         # è¼¸å…¥è®Šæ•¸å®£å‘Š
â”œâ”€â”€ outputs.tf           # è¼¸å‡ºå€¼å®šç¾©
â”œâ”€â”€ providers.tf         # Provider è¨­å®š
â”œâ”€â”€ locals.tf            # æœ¬åœ°è®Šæ•¸ï¼ˆè¨ˆç®—å€¼ï¼‰
â”œâ”€â”€ terraform.tfvars.example  # è®Šæ•¸å€¼ç¯„ä¾‹ï¼ˆä¸ commit å¯¦éš›å€¼ï¼‰
â”œâ”€â”€ versions.tf          # Terraform èˆ‡ Provider ç‰ˆæœ¬ç´„æŸ
â”œâ”€â”€ data.tf              # Data sourcesï¼ˆè®€å–æ—¢æœ‰è³‡æºï¼‰
â””â”€â”€ .gitignore           # Git å¿½ç•¥æª”æ¡ˆ
```

### ğŸ¤” è¨­è¨ˆæ„åœ–èªªæ˜

| æª”æ¡ˆ | ç‚ºä»€éº¼è¦åˆ†é–‹ï¼Ÿ |
|-----|--------------|
| `main.tf` | è³‡æºå®šç¾©çš„ã€Œä¸»å…¥å£ã€ï¼Œä½†å¯¦å‹™ä¸ŠæœƒæŒ‰è³‡æºé¡å‹æ‹†åˆ† |
| `variables.tf` | æ‰€æœ‰è¼¸å…¥åƒæ•¸é›†ä¸­ç®¡ç†ï¼Œæ–¹ä¾¿ Review |
| `providers.tf` | Provider è¨­å®šç¨ç«‹ï¼Œç‰ˆæœ¬å‡ç´šæ™‚å¥½æ‰¾ |
| `versions.tf` | ç‰ˆæœ¬ç´„æŸç¨ç«‹ï¼ŒCI/CD æ™‚å¥½åˆ¤æ–·ç›¸å®¹æ€§ |
| `data.tf` | è®€å–æ—¢æœ‰è³‡æºçš„é‚è¼¯åˆ†é–‹ï¼Œå€åˆ†ã€Œæˆ‘å»ºçš„ã€vsã€Œå·²å­˜åœ¨çš„ã€ |

---

## 2. ç‚ºä»€éº¼é€™æ¨£åˆ†æª”æ¡ˆï¼Ÿ

### æ¥æ‰‹æ—¢æœ‰å°ˆæ¡ˆæ™‚çš„å¿ƒæ™ºæµç¨‹

ç•¶ä½ æ¥æ‰‹ä¸€å€‹ Terraform å°ˆæ¡ˆï¼Œé€šå¸¸æœƒï¼š

1. **å…ˆçœ‹ `versions.tf`** â†’ ç¢ºèª Terraform ç‰ˆæœ¬è¦æ±‚
2. **å†çœ‹ `providers.tf`** â†’ ç¢ºèªç”¨å“ªäº›é›²ç«¯/æœå‹™
3. **çœ‹ `variables.tf`** â†’ äº†è§£æœ‰å“ªäº›å¯èª¿æ•´åƒæ•¸
4. **çœ‹ `data.tf`** â†’ äº†è§£ä¾è³´å“ªäº›ã€Œæ—¢æœ‰è³‡æºã€
5. **æœ€å¾Œçœ‹ `main.tf`** â†’ äº†è§£å¯¦éš›å»ºäº†ä»€éº¼

é€™å€‹é †åºåæ˜ äº†ã€Œç”±å¤–è€Œå…§ã€çš„ç†è§£è·¯å¾‘ã€‚

---

## 3. æª”æ¡ˆå…§å®¹èªªæ˜ï¼ˆç©ºéª¨æ¶ï¼‰

### versions.tfï¼ˆç‰ˆæœ¬ç´„æŸï¼‰

```hcl
# å®šç¾© Terraform èˆ‡ Provider ç‰ˆæœ¬è¦æ±‚
# ç›®å‰ç‚ºç©ºï¼ŒPhase 2 æœƒå¡«å…¥
terraform {
  # required_version = ">= 1.0"
  # required_providers { ... }
}
```

### providers.tfï¼ˆProvider è¨­å®šï¼‰

```hcl
# GCP Provider è¨­å®š
# ç›®å‰ç‚ºç©ºï¼ŒPhase 2 æœƒå¡«å…¥
# provider "google" { ... }
```

### variables.tfï¼ˆè¼¸å…¥è®Šæ•¸ï¼‰

```hcl
# å°ˆæ¡ˆå±¤ç´šè®Šæ•¸
# ç›®å‰ç‚ºç©ºï¼ŒPhase 2 æœƒå¡«å…¥
# variable "project_id" { ... }
```

### locals.tfï¼ˆæœ¬åœ°è®Šæ•¸ï¼‰

```hcl
# è¨ˆç®—å‹è®Šæ•¸ï¼ˆä¾‹å¦‚è³‡æºå‘½åè¦å‰‡ï¼‰
# ç›®å‰ç‚ºç©º
# locals { ... }
```

### data.tfï¼ˆData Sourcesï¼‰

```hcl
# è®€å–æ—¢æœ‰è³‡æºï¼ˆä¾‹å¦‚å·²å­˜åœ¨çš„ VPCï¼‰
# ç›®å‰ç‚ºç©ºï¼ŒPhase 3 æœƒå¡«å…¥
# data "google_compute_network" "existing_vpc" { ... }
```

### main.tfï¼ˆè³‡æºå®šç¾©ï¼‰

```hcl
# GCP è³‡æºå®šç¾©
# ç›®å‰ç‚ºç©ºï¼ŒPhase 3 æœƒé€æ­¥å¡«å…¥
```

### outputs.tfï¼ˆè¼¸å‡ºå€¼ï¼‰

```hcl
# åŸ·è¡Œå¾Œè¦é¡¯ç¤ºçš„è³‡è¨Š
# ç›®å‰ç‚ºç©º
# output "vpc_id" { ... }
```

---

## 4. .gitignore è¨­å®š

```gitignore
# Terraform ç‹€æ…‹æª”ï¼ˆåŒ…å«æ•æ„Ÿè³‡è¨Šï¼‰
*.tfstate
*.tfstate.*

# Terraform é–å®šæª”
.terraform.lock.hcl

# Terraform ç›®éŒ„
.terraform/

# å¯¦éš›è®Šæ•¸å€¼ï¼ˆå¯èƒ½åŒ…å«å¯†ç¢¼ï¼‰
terraform.tfvars
*.auto.tfvars

# ç³»çµ±æª”æ¡ˆ
.DS_Store
```

### ğŸ¤” ç‚ºä»€éº¼ `.tfstate` ä¸èƒ½ commitï¼Ÿ

- State æª”æ¡ˆåŒ…å«**æ‰€æœ‰è³‡æºçš„å®Œæ•´è³‡è¨Š**
- å¯èƒ½åŒ…å«å¯†ç¢¼ã€é€£ç·šå­—ä¸²ç­‰æ•æ„Ÿè³‡æ–™
- å¤šäººå”ä½œæ™‚æœƒé€ æˆè¡çª
- å¯¦å‹™ä¸Šæ‡‰ä½¿ç”¨ Remote Backendï¼ˆä¾‹å¦‚ GCSï¼‰

---

## 5. terraform.tfvars.example

```hcl
# è¤‡è£½æ­¤æª”æ¡ˆç‚º terraform.tfvars ä¸¦å¡«å…¥å¯¦éš›å€¼
# âš ï¸ terraform.tfvars ä¸æ‡‰è©² commit åˆ° Git

project_id = "your-project-id"
region     = "asia-northeast1"
zone       = "asia-northeast1-a"
```

---

## âœ… Phase 1 Checklist

å®Œæˆæœ¬éšæ®µå¾Œï¼Œä½ æ‡‰è©²æœ‰ï¼š

- [ ] ç†è§£ç‚ºä»€éº¼è¦åˆ†æˆå¤šå€‹ `.tf` æª”æ¡ˆ
- [ ] ç†è§£æ¯å€‹æª”æ¡ˆçš„è·è²¬
- [ ] ç†è§£ `.gitignore` è¦æ’é™¤å“ªäº›æª”æ¡ˆ
- [ ] å°ˆæ¡ˆç›®éŒ„çµæ§‹å·²å»ºç«‹ï¼ˆç©ºæª”æ¡ˆï¼‰

---

## ğŸ“ Review å•é¡Œï¼ˆè‡ªæˆ‘æª¢æŸ¥ï¼‰

1. ç‚ºä»€éº¼ `terraform.tfstate` ä¸èƒ½ commitï¼Ÿ
2. `data.tf` å’Œ `main.tf` çš„å·®åˆ¥æ˜¯ä»€éº¼ï¼Ÿ
3. å¦‚æœå°ˆæ¡ˆå¾ˆå¤§ï¼Œ`main.tf` æ‡‰è©²æ€éº¼æ‹†åˆ†ï¼Ÿ

---

**å®Œæˆ Review å¾Œï¼Œè«‹å›è¦†ã€ŒOKï¼Œé€²å…¥ Phase 2ã€**

â¡ï¸ ä¸‹ä¸€æ­¥ï¼š[Phase 2: Provider / Backend è¨­è¨ˆ](phase2-provider.md)
